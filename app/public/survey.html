<!DOCTYPE html>
<html>
  <head>
    <title>Drag'd</title>

    <!-- materialize css-->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css"
    />

    <!-- google icon font -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />

    <!-- font awesome icons -->
    <script src="https://use.fontawesome.com/b38c8ed4c7.js"></script>

  </head>

  <body>
    <header>
      <!-- navbar -->
      <nav>
        <div class="nav-wrapper blue accent-4">
          <div class="container">
            <div class="row">
              <div class="col l6 s12">
                <!-- icon -->
                <i
                  class="fa fa-id-badge fa-4x"
                  aria-hidden="true"
                  id="logo-icon"
                ></i>
                <!-- link back to root -->
                <a href="/" class="brand-logo" id="logo">&nbsp; Drag'd</a>
              </div>
              <!-- nav links -->
              <ul class="right hide-on-med-and-down" id="head-nav-links">
                <li>
                  <a
                    href="mailto:bret.allan@gmail.com?Subject=WOW!%20Hire%20me%20as%20a%20developer,%20mobile%20@415-465-3544"
                    target="_top"
                    >Contact</a
                  >
                </li>
                <li>
                  <a href="https://github.com/bretgithub/DragD"
                    >Github</a
                  >
                  <li><a class="white-text" href="/survey">Survey</a></li>
              <li>
                <a class="white-text" href="/api/dragQueenList"
                  >API Drag Queen List</a
                >
              </li>
                </li>
              </ul>
              <!-- /nav links -->
            </div>
          </div>
        </div>
      </nav>
      <!-- /nav -->
    </header>

    <main>
      <div class="container">
        <div class="row">
          <div class="col s12 z-depth-5 mainpanel">
            <div id="mainpanel-content">
              <h3>Survey Questions</h3>
              <div class="divider"></div>

              <h4>About You</h4>

              <div class="input-field col s6">
                <h5>Name (Required)</h5>
                <i class="material-icons prefix">account_circle</i>
                <input
                  type="text"
                  class="validate"
                  placeholder="Your Name Here"
                  id="userName"
                />
              </div>

              <div class="input-field col s6">
                <h5>Link to Photo Image (Required)</h5>
                <i class="material-icons prefix">picture_in_picture</i>
                <input
                  type="text"
                  class="validate"
                  placeholder="Photo Link Here"
                  id="userPhoto"
                />
              </div>

              <!-- questions -->
              <div class="input-field col s12">
                <h4>Question 1</h4>
                <h5>
                  You consider yourself to be a fierce kween.
                </h5>
                <select id="question1">
                  <option value="" disabled selected>Select...</option>
                  <option value="1">1 (Strongly Disagree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Agree)</option>
                </select>

                <h4>Question 2</h4>
                <h5>
                  You paint your face for those in the back row.
                </h5>
                <select id="question2">
                  <option value="" disabled selected>Select...</option>
                  <option value="1">1 (Strongly Disagree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Agree)</option>
                </select>

                <h4>Question 3</h4>
                <h5>
                  Pink is your favorite color.
                </h5>
                <select id="question3">
                  <option value="" disabled selected>Select...</option>
                  <option value="1">1 (Strongly Disagree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Agree)</option>
                </select>

                <h4>Question 4</h4>
                <h5>
                  Shake and go wigs are your go to.
                </h5>
                <select id="question4">
                  <option value="" disabled selected>Select...</option>
                  <option value="1">1 (Strongly Disagree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Agree)</option>
                </select>

                <h4>Question 5</h4>
                <h5>
                  You felt you were robbed of the crown on RuPaul's Drag Race All Stars Season 2.
                </h5>
                <select id="question5">
                  <option value="" disabled selected>Select...</option>
                  <option value="1">1 (Strongly Disagree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Agree)</option>
                </select>

                <h4>Question 6</h4>
                <h5>
                  You like the movie Contact.
                </h5>
                <select id="question6">
                  <option value="" disabled selected>Select...</option>
                  <option value="1">1 (Strongly Disagree)</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5 (Strongly Agree)</option>
                </select>
              </div>
              
              <!-- submit button -->
              <div>
                <button
                  class="btn waves-effect cyan accent-4"
                  type="submit"
                  name="action"
                  id="submitButton"
                >
                  Submit Responses
                  <i class="material-icons right">send</i>
                </button>
              </div>
              <br />
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- no footer, wanted to make this feel more like a mobile app -->

    <!-- modal displaying drag queen match -->
    <div id="dragDModal" class="modal">
      <div class="modal-content">
        <h4>Drag Queen Match</h4>
        <div class="divider"></div>
        <h5 id="userMatch"></h5>
        <a
        href="/survey"
        class="modal-action modal-close waves-effect waves-green btn-flat"
        >Queen Out Again!</a>
        <a
        href="/"
        class="modal-action modal-close waves-effect waves-green btn-flat"
        >Go Home!</a>
        <img id="userMatchImage" class="materialboxed" width="650" src="" />
      </div>
      <div class="modal-footer">
      </div>
    </div>

    <!-- jQuery library -->
    <script
      type="text/javascript"
      src="https://code.jquery.com/jquery-2.1.1.min.js"
    ></script>

    <!-- materialize js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>

    <script type="text/javascript">
      $(document).ready(function() {
        $("select").material_select();
        $(".modal").modal({
          // modal cannot be dismissed by clicking outside modal :false
          dismissible: false,
          // modal opacity
          opacity: 0.5,
          // transition-in duration in ms
          inDuration: 300,
          // transition-out duration in ms
          outDuration: 200,
          // starting top style attribute
          startingTop: "4%",
          // ending top style attribute
          endingTop: "10%"
        });
      });
      // listener for submit button
      $("#submitButton").on("click", function(event) {
        event.preventDefault();
        // take user inputs
        let userInput = {
          name: $("#userName")
            .val()
            .trim(),
          photo: $("#userPhoto")
            .val()
            .trim(),
          scores: [
            $("#question1")
              .val()
              .trim(),
            $("#question2")
              .val()
              .trim(),
            $("#question3")
              .val()
              .trim(),
            $("#question4")
              .val()
              .trim(),
            $("#question5")
              .val()
              .trim(),
            $("#question6")
              .val()
              .trim()
          ]
        };
        // console.log("userInput = " + JSON.stringify(userInput));
        // add user inputs to drag queen list
        $.post("/api/dragQueenList", userInput).done(function(data) {
          // console.log("response = " + JSON.stringify(data));
          // set the name and image values of drag queen match
          $("#userMatch").html(data.matchName);
          $("#userMatchImage").attr("src", data.matchImage);
          // pop open the modal dialog
          $("#dragDModal").modal("open");
        });
      });
    </script>
  </body>
</html>
